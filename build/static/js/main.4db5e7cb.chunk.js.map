{"version":3,"sources":["hooks/useSocket.js","hooks/useMessenger.js","components/ChatBox.js","App.js","index.js"],"names":["socket","io","connect","useSocket","listeners","useMemo","Object","entries","forEach","_ref","_ref2","slicedToArray","name","listener","on","useMessenger","_useState","useState","_useState2","log","setLog","logRef","useRef","current","addToLog","message","concat","toConsumableArray","objectSpread","at","moment","content","toISOString","from","emit","ChatBox","_useMessenger","_useMessenger2","sendMessage","input","setInput","getMessageClassname","cx","react_default","a","createElement","className","map","i","key","format","value","onChange","e","target","onKeyDown","App","isBusinessAvailable","setIsBusinessAvailable","console","components_ChatBox","ReactDOM","render","src_App","document","getElementById"],"mappings":"6PAIMA,SAASC,EAAGC,QAAQ,4CASXC,EAPG,SAAAC,GAAS,OAAIC,kBAAQ,WAItC,OAHAC,OAAOC,QAAQH,GAAWI,QAAQ,SAAAC,GAAsB,IAAAC,EAAAJ,OAAAK,EAAA,EAAAL,CAAAG,EAAA,GAApBG,EAAoBF,EAAA,GAAdG,EAAcH,EAAA,GACvDV,EAAOc,GAAGF,EAAMC,KAEVb,GACL,uDC0BYe,EAjCM,WAAM,IAAAC,EAEJC,mBAAS,IAFLC,EAAAZ,OAAAK,EAAA,EAAAL,CAAAU,EAAA,GAEnBG,EAFmBD,EAAA,GAEdE,EAFcF,EAAA,GAGpBG,EAASC,mBACfD,EAAOE,QAAUJ,EAEjB,IAAMK,EAAW,SAAAC,GAAO,OAAIL,EAAM,GAAAM,OAAApB,OAAAqB,EAAA,EAAArB,CAC9Be,EAAOE,SADuB,CAAAjB,OAAAsB,EAAA,EAAAtB,CAAA,GAG7BmB,EAH6B,CAIhCI,GAAIC,IAAOL,EAAQI,UAIf7B,EAASG,EAAU,CACxBsB,QAASD,IAeV,MAAO,CAACL,EAZY,SAAAY,GAEnB,IAAMN,EAAU,CACfI,GAAIC,MAASE,cACbC,KAAM,KACNF,WAGDP,EAASC,GACTzB,EAAOkC,KAAK,UAAWT,MCYVU,EAvCC,WAAM,IAAAC,EAEMrB,IAFNsB,EAAA/B,OAAAK,EAAA,EAAAL,CAAA8B,EAAA,GAEdjB,EAFckB,EAAA,GAETC,EAFSD,EAAA,GAAArB,EAIKC,mBAAS,IAJdC,EAAAZ,OAAAK,EAAA,EAAAL,CAAAU,EAAA,GAIduB,EAJcrB,EAAA,GAIPsB,EAJOtB,EAAA,GAMfuB,EAAsB,SAAAhB,GAAO,OAAIiB,IACtC,UACiB,OAAjBjB,EAAQQ,KAAgB,OAAS,SAGlC,OACCU,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACdH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBACb3B,EAAI4B,IAAI,SAACtB,EAASuB,GAAV,OACRL,EAAAC,EAAAC,cAAA,OACCI,IAAKD,EACLF,UAAWL,EAAoBhB,IAC/BkB,EAAAC,EAAAC,cAAA,YAAOpB,EAAQI,GAAGqB,OAAO,SAAzB,OACAP,EAAAC,EAAAC,cAAA,YAAOpB,EAAQQ,KAAf,MACAU,EAAAC,EAAAC,cAAA,YAAOpB,EAAQM,YAGjBY,EAAAC,EAAAC,cAAA,SACCM,MAAOZ,EACPa,SAAU,SAAAC,GAAC,OAAIb,EAASa,EAAEC,OAAOH,QACjCI,UAAW,SAAAF,GACI,UAAVA,EAAEJ,MACLX,EAAYC,GACZC,EAAS,iBCZDgB,MAdf,WAAe,IAAAxC,EAEwCC,oBAAS,GAFjDC,EAAAZ,OAAAK,EAAA,EAAAL,CAAAU,EAAA,GAEPyC,EAFOvC,EAAA,GAEcwC,EAFdxC,EAAA,GAKd,OAFAf,EAAU,CAACsD,oBAAqB,SAAAb,GAAC,OAAIe,QAAQxC,IAAI,IAAKyB,IAAMc,EAAuBd,MAE9Ea,EAGJd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACdH,EAAAC,EAAAC,cAACe,EAAD,OAJ+B,MCPlCC,IAASC,OAAOnB,EAAAC,EAAAC,cAACkB,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.4db5e7cb.chunk.js","sourcesContent":["import {useMemo} from 'react';\nimport io from 'socket.io-client';\n\n//const socket = io.connect('http://localhost:5000');\nconst socket = io.connect('https://still-falls-37601.herokuapp.com/');\n\nconst useSocket = listeners => useMemo(() => {\t\n\tObject.entries(listeners).forEach(([name, listener]) => {\n\t\tsocket.on(name, listener);\n\t});\n\treturn socket;\n}, []);\n\nexport default useSocket;","import {useState, useRef} from 'react';\nimport moment from 'moment';\nimport useSocket from './useSocket';\n\nconst useMessenger = () => {\n\n\tconst [log, setLog] = useState([]);\n\tconst logRef = useRef();\n\tlogRef.current = log;\n\n\tconst addToLog = message => setLog([\n\t\t...logRef.current, \n\t\t{\n\t\t\t...message,\n\t\t\tat: moment(message.at),\n\t\t},\n\t]);\n\n\tconst socket = useSocket({\n\t\tmessage: addToLog,\n\t});\n\n\tconst sendMessage = content => {\n\t\t\n\t\tconst message = {\n\t\t\tat: moment().toISOString(),\n\t\t\tfrom: 'me',\n\t\t\tcontent,\n\t\t}\n\n\t\taddToLog(message);\n\t\tsocket.emit('message', message)\n\t};\n\n\treturn [log, sendMessage]\n};\n\nexport default useMessenger;","import React, {useState} from 'react';\nimport cx from 'classnames';\nimport useMessenger from '../hooks/useMessenger';\n\nconst ChatBox = () => {\n\n\tconst [log, sendMessage] = useMessenger();\n\n\tconst [input, setInput] = useState('');\n\n\tconst getMessageClassname = message => cx(\n\t\t'message',\n\t\tmessage.from === 'me' ? 'self' : 'peer',\n\t);\n\n\treturn (\n\t\t<div className='panel'>\n\t\t\t<div className='panel message-box'>\n\t\t\t\t{log.map((message, i) => \n\t\t\t\t\t<div \n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={getMessageClassname(message)}>\n\t\t\t\t\t\t<span>{message.at.format('h:mma')} - </span>\n\t\t\t\t\t\t<span>{message.from}: </span>\n\t\t\t\t\t\t<span>{message.content}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<input \n\t\t\t\t\tvalue={input} \n\t\t\t\t\tonChange={e => setInput(e.target.value)}\n\t\t\t\t\tonKeyDown={e => {\n\t\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\t\tsendMessage(input);\n\t\t\t\t\t\t\tsetInput('');\n\t\t\t\t\t\t}\n\t\t\t\t\t}}/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\n\t);\n}\n\nexport default ChatBox;","import React, {useState} from 'react';\n\nimport useSocket from './hooks/useSocket';\nimport ChatBox from './components/ChatBox'\n\nimport './App.css';\n\nfunction App() {\n\n\tconst [isBusinessAvailable, setIsBusinessAvailable] = useState(false);\n\tuseSocket({isBusinessAvailable: a => console.log('A', a) || setIsBusinessAvailable(a)});\n\n\tif (!isBusinessAvailable) return null;\n\n\treturn (\n\t\t<div className='app'>\n\t\t\t<ChatBox />\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}